<div class="max-w-4xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-center gap-3 mb-4">
      <a routerLink="/courses"
         class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200">
        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
        </svg>
      </a>
      <div>
        <h1 class="text-3xl md:text-4xl font-bold text-gray-900">
          {{ isEditMode ? 'Editar Curso' : 'Crear Nuevo Curso' }}
        </h1>
        <p class="mt-1 text-gray-600">
          {{ isEditMode ? 'Actualiza la información del curso' : 'Completa todos los campos para crear un curso' }}
        </p>
      </div>
    </div>
  </div>

  <!-- Formulario -->
  <form [formGroup]="courseForm" (ngSubmit)="onSubmit()" class="bg-white rounded-xl shadow-md p-6 md:p-8">

    <!-- Información básica -->
    <div class="mb-8">
      <h2 class="text-xl font-bold text-gray-900 mb-4 pb-2 border-b-2 border-primary-600">
        Información Básica
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Título -->
        <div class="md:col-span-2">
          <label for="title" class="block text-sm font-medium text-gray-700 mb-2">
            Título del curso <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="title"
            formControlName="title"
            placeholder="Ej: Desarrollo Web con Angular"
            [class]="hasError('title') ? 'input-field input-error' : 'input-field'">
          <p *ngIf="hasError('title')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('title') }}
          </p>
        </div>

        <!-- Descripción -->
        <div class="md:col-span-2">
          <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
            Descripción <span class="text-red-500">*</span>
          </label>
          <textarea
            id="description"
            formControlName="description"
            rows="4"
            placeholder="Describe el contenido y objetivos del curso..."
            [class]="hasError('description') ? 'input-field input-error' : 'input-field'"></textarea>
          <p *ngIf="hasError('description')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('description') }}
          </p>
          <p class="mt-1 text-sm text-gray-500">
            {{ courseForm.get('description')?.value?.length || 0 }} / 500 caracteres
          </p>
        </div>

        <!-- Instructor -->
        <div>
          <label for="instructor" class="block text-sm font-medium text-gray-700 mb-2">
            Instructor <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="instructor"
            formControlName="instructor"
            placeholder="Nombre del instructor"
            [class]="hasError('instructor') ? 'input-field input-error' : 'input-field'">
          <p *ngIf="hasError('instructor')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('instructor') }}
          </p>
        </div>

        <!-- Categoría -->
        <div>
          <label for="category" class="block text-sm font-medium text-gray-700 mb-2">
            Categoría <span class="text-red-500">*</span>
          </label>
          <select
            id="category"
            formControlName="category"
            [class]="hasError('category') ? 'input-field input-error' : 'input-field'">
            <option value="">Selecciona una categoría</option>
            <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
          </select>
          <p *ngIf="hasError('category')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('category') }}
          </p>
        </div>
      </div>
    </div>

    <!-- Detalles del curso -->
    <div class="mb-8">
      <h2 class="text-xl font-bold text-gray-900 mb-4 pb-2 border-b-2 border-primary-600">
        Detalles del Curso
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Nivel -->
        <div>
          <label for="level" class="block text-sm font-medium text-gray-700 mb-2">
            Nivel <span class="text-red-500">*</span>
          </label>
          <select
            id="level"
            formControlName="level"
            [class]="hasError('level') ? 'input-field input-error' : 'input-field'">
            <option value="">Selecciona un nivel</option>
            <option *ngFor="let lvl of levels" [value]="lvl">{{ lvl }}</option>
          </select>
          <p *ngIf="hasError('level')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('level') }}
          </p>
        </div>

        <!-- Duración -->
        <div>
          <label for="duration" class="block text-sm font-medium text-gray-700 mb-2">
            Duración (horas) <span class="text-red-500">*</span>
          </label>
          <input
            type="number"
            id="duration"
            formControlName="duration"
            placeholder="Ej: 40"
            min="1"
            max="500"
            [class]="hasError('duration') ? 'input-field input-error' : 'input-field'">
          <p *ngIf="hasError('duration')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('duration') }}
          </p>
        </div>

        <!-- Fecha de inicio -->
        <div>
          <label for="startDate" class="block text-sm font-medium text-gray-700 mb-2">
            Fecha de inicio <span class="text-red-500">*</span>
          </label>
          <input
            type="date"
            id="startDate"
            formControlName="startDate"
            [class]="hasError('startDate') ? 'input-field input-error' : 'input-field'">
          <p *ngIf="hasError('startDate')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('startDate') }}
          </p>
        </div>

        <!-- Máximo de estudiantes -->
        <div>
          <label for="maxStudents" class="block text-sm font-medium text-gray-700 mb-2">
            Máximo de estudiantes <span class="text-red-500">*</span>
          </label>
          <input
            type="number"
            id="maxStudents"
            formControlName="maxStudents"
            placeholder="Ej: 30"
            min="1"
            max="200"
            [class]="hasError('maxStudents') ? 'input-field input-error' : 'input-field'">
          <p *ngIf="hasError('maxStudents')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('maxStudents') }}
          </p>
        </div>
      </div>
    </div>

    <!-- Estado -->
    <div class="mb-8">
      <h2 class="text-xl font-bold text-gray-900 mb-4 pb-2 border-b-2 border-primary-600">
        Estado
      </h2>

      <div class="flex items-center gap-3 p-4 bg-gray-50 rounded-lg">
        <input
          type="checkbox"
          id="isActive"
          formControlName="isActive"
          class="w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-primary-500 focus:ring-2">
        <label for="isActive" class="text-sm font-medium text-gray-700 cursor-pointer select-none">
          Curso activo (disponible para inscripciones)
        </label>
      </div>
    </div>

    <!-- Botones -->
    <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200">
      <button
        type="submit"
        [disabled]="submitAttempted && courseForm.invalid"
        class="btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed">
        {{ isEditMode ? 'Actualizar Curso' : 'Crear Curso' }}
      </button>

      <button
        type="button"
        (click)="onCancel()"
        class="btn-secondary flex-1">
        Cancelar
      </button>
    </div>

    <!-- Indicador de campos requeridos -->
    <p class="mt-4 text-sm text-gray-600 text-center">
      <span class="text-red-500">*</span> Campos obligatorios
    </p>
  </form>
</div>
